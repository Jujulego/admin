/*
 * _navbar.scss
 */
@import "variables";
@import "colors";

// Mixin
@mixin navbar-hoverable($param: color, $selec: "") {
  @if ($selec == "") {
    #{$param}: $navbar-color;

    &:hover {
      #{$param}: $navbar-color-hover;
    }
  } @else {
    #{$selec} {
      #{$param}: $navbar-color;
    }

    &:hover #{$selec} {
      #{$param}: $navbar-color-hover;
    }
  }
}

// Style
.content-wrapper {
    height: calc(100vh - 56px);
    margin-top: calc(40px + 1rem);

    transition: margin-left 500ms ease;
}

.sticky-footer .content-wrapper {
    height: calc(100vh - 112px);
}

#main-nav {
  .navbar-brand {
    width: 250px;
  }

  // Items
  .nav-item > .nav-link {
    position: relative;
    display: flex;

    & > i {
      height: 16px;
      width: 20px;
      flex: 0 0 auto;

      margin-right: auto !important;

      text-align: center;
    }

    & > span {
      position: relative;
      top: -.25rem;

      width: calc(100% - 20px - 1rem);

      overflow-x: hidden;
      white-space: nowrap;

      &.badge {
        position: absolute;
        top: -2px;
        right: -2px;

        width: auto;
        height: auto;
        line-height: 1;
      }
    }

    &[data-toggle="collapse"] > span {
      width: calc(100% - 36px - 1rem);
    }
  }

  .navbar-nav > .nav-item > .nav-link {
    @include navbar-hoverable;

    i:not(:last-child) {
      margin-right: 1rem;
    }
  }

  // Toggler ecran rÃ©duit
  .navbar-toggler {
    @include navbar-hoverable(background-color, "span");

    display: flex;
    height: 40px;
    min-width: 40px;

    flex-direction: column;

    margin-left: .675rem;
    padding: .3125rem 0;
    border: none;

    // Symbole
    span {
      width: 1.4rem;
      height: .2rem;

      flex: 0 0 auto;

      margin: 0 auto;
      border-radius: .075rem;

      transition: transform 250ms ease, opacity 250ms ease;

      &:nth-child(1) {
        transform: translate(0px, .45rem) rotate(45deg);
      }

      &:nth-child(2) {
        margin: .25rem auto;
        opacity: 0;
      }

      &:nth-child(3) {
        transform: translate(0px, -.45rem) rotate(-45deg);
      }
    }

    // Tranformations
    &.collapsed span {
      &:nth-child(1),&:nth-child(3) {
        transform: translate(0px, 0px) rotate(0deg);
      }

      &:nth-child(2) {
        opacity: 1;
      }
    }
  }

  // Panels
  .panelbar {
    flex-direction: row;

    button {
      padding: .5rem;
    }
  }

  // Sidebar
  .sidebar .nav-item {
    ul {
      margin-left: 1.25rem;
      padding-left: 0;

      list-style: none;
    }

    & > .nav-link {
      &[data-toggle="collapse"]::after {
        height: 16px;
        width: 16px;
        line-height: 16px;

        content: "\f107";
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        text-align: center;

        transition: transform 250ms ease;
      }

      &.collapsed[data-toggle="collapse"]::after {
        transform: rotate(-90deg);
      }
    }
  }

  // Toggler barre de gauche
  .sidebar-toggler {
    position: fixed;
    bottom: 0;
    left: 0;

    display: none;
    height: calc(16px + 2rem);
    line-height: 16px;

    padding: 1rem;

    background-color: $navbar-background;
    border-radius: 0;

    &:focus {
      box-shadow: 0 0 0 0.2rem $focus-shadow inset;
    }
  }
}

@each $name,$size in $breakpoints {
  @media (min-width: $size) {
    #main-nav.navbar-expand-#{$name} {
      & ~ .content-wrapper {
        margin-left: 250px;
      }

      .navbar-toggler {
        display: none;
      }

      .nav-expand-hide-span {
        & > i {
          margin-right: 0 !important;
        }

        & > span {
          display: none !important;
        }
      }

      .sidebar,
      .sidebar-toggler {
        width: 250px;

        transition: width 500ms ease;
      }

      .sidebar {
        position: fixed;
        top: calc(40px + 1rem);
        left: 0;

        height: calc(100vh - 56px - 3rem);
        flex-direction: column;

        padding-top: .25rem;

        background-color: #212529;

        .nav-item > .nav-link {
          padding: .75rem 1rem .5rem;

          &[data-toggle="collapse"]::after {
            position: relative;
            top: 0;
            left: 0;

            transition: transform 250ms ease, top 500ms ease-in-out, left 500ms ease-in-out;
          }

          &.collapsed[data-toggle="collapse"]::after {
            top: .4rem;
            left: .1rem;
          }
        }
      }

      .sidebar-toggler {
        display: block;

        & > i {
          transition: transform 500ms ease;
        }
      }
    }

    .navbar-reduite #main-nav.navbar-expand-#{$name} {
      & ~ .content-wrapper {
        margin-left: calc(20px + 2rem);
      }

      .sidebar,
      .sidebar-toggler {
        width: calc(20px + 2rem);
      }

      .sidebar-toggler > i {
        transform: rotate(-180deg);
      }
    }
  }
}